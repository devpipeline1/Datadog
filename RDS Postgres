# Update packages
sudo yum update -y

# Install PostgreSQL client (version 15 shown; change if needed)
sudo amazon-linux-extras enable postgresql15
sudo yum install -y postgresql15


psql -h apmdt.cdiggq2s868n.ap-south-1.rds.amazonaws.com -U postgres -d postgres -p 5432
psql -d postgres -c "select version();"

exit
export PGHOST="mydb.abc123xyz.ap-south-1.rds.amazonaws.com"
export PGPORT=5432
export PGUSER="postgres"          # or your master/privileged user
export PGPASSWORD="YOUR_PASSWORD"
psql -d postgres -c "select version();"
psql -d postgres -c "CREATE DATABASE demo_db;"

psql -v ON_ERROR_STOP=1 -d demo_db <<'SQL'
CREATE TABLE IF NOT EXISTS users (
  id          bigserial PRIMARY KEY,
  email       text UNIQUE NOT NULL,
  full_name   text NOT NULL,
  created_at  timestamptz NOT NULL DEFAULT now()
);

INSERT INTO users (email, full_name) VALUES
('alice@example.com','Alice A.'),
('bob@example.com','Bob B.'),
('carol@example.com','Carol C.')
ON CONFLICT (email) DO NOTHING;

\q
SQL

cat > /tmp/users.csv <<'CSV'
email,full_name,created_at
alice@example.com,Alice A.,2023-01-01T10:00:00Z
bob@example.com,Bob B.,2023-01-02T11:00:00Z
carol@example.com,Carol C.,2023-01-03T12:00:00Z
CSV

psql -d demo_db -c "\copy users(email,full_name,created_at) FROM '/tmp/users.csv' WITH (FORMAT csv, HEADER true)"
postgres=> SELECT * FROM users;


1.Bulk Insert Many Row
INSERT INTO users (email, full_name)
SELECT 
  'user' || i || '@example.com',
  'User ' || i
FROM generate_series(1, 10000) AS s(i);

2.Run heavy read queries
SELECT * FROM users ORDER BY created_at DESC LIMIT 100;

3.Update Many Rows
UPDATE users 
SET full_name = full_name || ' [updated]' 
WHERE id % 100 = 0;
